{% extends "base_generic.html" %}

<!-- title -->
{% block title%}<title>Profile</title>{% endblock %}

{% load static %}

<!-- css -->
{% block css %}<link rel="stylesheet" type="text/css" href="{% static 'mixlist/profile.css' %}" />{% endblock %}

{% block javascript %} {% endblock %}

{% block content %}


<div class="jumbotron" style="background-image: url(https://s7.postimg.cc/4z6qvs61n/profile-background.jpg); background-size: cover">
<div class="container">
	<div class="row">
		<div class="col-lg-12 mt-2">
			<div class="jumbotron2">
				<div class="row">
					<div class="col-lg-4">
						<div class="bg-light p-2 rounded">
							<table>
								<tr>
									<td><b>Date Joined:</b></td>
									<td>{{ profile.user.date_joined }}</td>
								</tr>
								<tr>
									<td><b>Location:</b></td>
									<td>{{ profile.location }}
									</tr>
									<tr>
										<td><b>About me:</b></td>
									</tr>
									<tr>
										<td colspan=2 style="word-wrap: break-word">{{ profile.about_me }}</td>
									</tr>
								</table>
							</div>
						</div>
						<div>					
							{% if profile.profile_image %}
							<img src="{{ profile.profile_image.url }}" height="250" width="250">
							{% else %}
							<img src="http://via.placeholder.com/250x250">
							{% endif %}
							<h1 id="username">{{ profile.user.username }}</h1>
							{% if user.is_authenticated %}
								{% if user.profile == profile %}
									<a href="{% url 'edit-profile' %}" class="btn btn-primary">Edit Profile</a>
								{% elif user.profile in bfollows %}
									<a href="{% url 'unfollow' profile.id %}" class="btn btn-secondary">Unfollow</a>
								{% else %}
									<a href="{% url 'follow' profile.id %}" class="btn btn-primary">Follow</a>
								{% endif %}
							{% endif %}
						</div>
					</div>
				</div>

<div class="row">
	<div class="col-lg-4">
		<div class="bg-light p-2 rounded">
			<div class="card" style="width: 18rem;">
				<h3>{{ profile.user.username }}'s Favorite Mixes</h3>
				<ul class="list-group list-group-flush">
					{% for mix in profile.favorites.all %}
					<li><a href="{{mix.get_absolute_url}}">{{ mix.title }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>

	<div class="col-lg-4">
		<div class="bg-light p-2 rounded">
			<div class="card" style="width: 18rem;">
				<h3>{{ profile.user.username }}'s uploaded mixes</h3>
				<ul class="list-group list-group-flush">
					{% for mix in mixs %}
					<li><a href="{{mix.get_absolute_url}}">{{ mix.title }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

	</div>
	<div class="col-lg-4">
		<div class="bg-light p-2 rounded">
			<div class="card" style="width: 18rem;">
				<h3>{{ profile.user.username }}'s Followees</h3>
				<ul class="list-group list-group-flush">	
					{% for f in follows.all %}
					{% if profile == f.owner %}
					<li><a href="{{f.follows.id}}">{{ f.follows.user.username }}</a></li>
					{% endif %}
					{% endfor %}
				</ul>
			</div>
			<p></p>
		</div>
	</div>
	<div class="col-lg-0"></div>
		<!--
		Unused fields:
		<h1>First Name: {{ profile.user.first_name }}</h1>
	    <h1>Last Name: {{ profile.user.last_name }}</h1>
	    <h1>Full Name: {{ profile.user.get_full_name }}</h1>
	    <h1>Email: {{ profile.user.email }}</h1>
	-->
</div>
</div>
{% endblock %}
